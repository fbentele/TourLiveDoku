\chapter{DeviceManagement Portal}

In diesem Kapitel wird genauer auf das DeviceManagement Portal eingegangen.

\section{Software Analyse}

\subsection{Anforderungen}
Um die Anforderungen zu evaluieren wurde das bestehende Geräteverwaltungsportal analysiert. Da beim bestehenden System der Funktionsumfang stark eingeschränkt war, wurden vom Industriepartner zusätzliche Funktionalität gewünscht.
Um eine kurze Übersicht über die vorhandenen Funktionen und erfassten Anforderungen zu geben folgt  eine Tabelle.

{\renewcommand{\arraystretch}{2}%
    \begin{longtable}{  p{3.5cm} | p{4.3cm} | p{4.3cm} }

    \textbf{Anforderung} & \textbf{Altes System} & \textbf{Neues System} \\ \hline
\hline
    Einstellungen anpassen & Nur Renndistanzkorrektur & Detaillierte Verwaltung der Geräteeinstellungen \\ \hline
    Status der Geräte & Rudimentäre Anzeige des Gerätestatus & Detaillierte Anzeige des Gerätestatus \\
    \hline
     Alarming bei schlechtem Gerätezustand & Dauer seit letztem Positionsupdate / Bildempfang zu gross & Visuelle Hervorhebung bei Problemen des Gerätestatus \\
    \hline
    Neustarten des Gerätes & Neustarten des Gerätes via Portal & - (nur Neustarten der App möglich)\\
    \hline
    Gerätelog anzeigen & - & Gerätelog wird angezeigt\\
    \hline
    Versand von Nachrichten & - & Nachrichten an das Gerät senden via Portal\\

\caption{Anforderungen DeviceManagement Portal}
\end{longtable}}

Eine detaillierte Beschreibung aller Anforderungen befindet sich im Anhang. Folgend werden die aus unserer Sicht wichtigsten Anforderungen beschrieben.

\subsubsection{Funktionale Anforderungen}
\paragraph{Betriebsmodi}
Die Geräte sollen sowohl über ein Management-Portal, analog zum zur bisherigen Verwaltungsseite , fernverwaltet als auch über ein „Einstellungen“-Menü direkt am Gerät konfiguriert werden können. 

Daraus resultieren zwei Betriebsmodi: „managed“ und „unmanaged“. Beim ersten App-Start nach der Installation der App, wird der Benutzer gefragt, in welchem Modus das Aufnahmesystem betrieben werden soll. Die beiden Modi lassen sich am Gerät selber jederzeit ändern. Wählt der Benutzer beim ersten App-Start innerhalb von 10 Sekunden keinen Modus, wird das Gerät automatisch in den Betriebsmodus „managed“ versetzt und eine Standardkonfiguration vom Device Management Server bezogen.

Bei allen weiteren App-Starts werden die Einstellungen vom letzten Betrieb übernommen sofern der Betriebsmodus zuvor „unmanaged“ war. War der Betriebsmodus auf „managed“ eingestellt, so wird die Konfiguration vom Management Server bezogen. Ist dieser nicht verfügbar, wird der Modus auf „unmanaged“ gesetzt und die existierenden Einstellungen verwendet.

\paragraph{Alarming Funktionen}
Treten Probleme auf, so soll auf dem Telefon sowie in der Management Konsole darüber informiert werden. Als zu meldende Probleme gelten folgende:
\begin{itemize}
\item Keine GPS-Daten während 2 Minuten
\item Keine Bild-Daten während 2 Minuten
\item Keine Mobile-Verbindung 2 Minuten [TODO: Unlogisch]
\item Smartphone wird nicht mehr geladen (Stromzufuhr unterbrochen)
\item Smartphone Akkustand ist unter 50\%, 25\%, 10\%
\end{itemize}
	
\subsubsection{Nichtfunktionale Anforderungen}

\paragraph{Sicherheit}
Das Devicemanagement Portal wird mit einem Benutzernamen und Passwort gesperrt. 

\subsection{Technologien}
Für die Entwicklung des Portals wurde das Spring Framework benutzt. Genauere Details dazu befinden sich in dem TourLive Server Kapitel.

\subsection{Entwicklungsumgebung}
Für die Entwicklung des DeviceManagement Portals wurde die Spring Tool Suite verwendet. Die Spring Tool Suite wurde bereits im Kapitel TourLive Server genauer beschrieben.

\subsection{Paper Protoypes}



\subsection{Domain Model}

\section{Software Design}
\subsection{Schichtenmodell}


\subsection{Sequenzdiagramm}

